(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{29:function(t,e,n){},40:function(t,e,n){"use strict";n.r(e);var a=n(1),r=n.n(a),c=n(21),i=n.n(c),s=(n(29),n(2)),o=n(3),u=n(5),l=n(4),d=n(14),j=n(6),h=n(7),b=n.n(h),p=n(10),O=n(17),f="user",v=function(t){return localStorage.setItem(f,JSON.stringify(t))},m=function(t){return function(e){setTimeout((function(){e(t)}),1500)}},x=function(){return new Promise((function(t){var e=JSON.parse(localStorage.getItem(f));null===e&&(e={}),m(e)(t)}))},g=function(t){return new Promise((function(e){v(Object(O.a)(Object(O.a)({},{name:"",email:"",image:"",description:""}),t)),m("OK")(e)}))},k=n(0),y=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)("p",{children:"Carregando..."})}}]),n}(a.Component),S=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={user:""},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var t=this;x().then((function(e){t.setState({user:e.name})}))}},{key:"render",value:function(){var t=this.state.user;return Object(k.jsxs)("header",{"data-testid":"header-component",children:[t?Object(k.jsx)("p",{"data-testid":"header-user-name",children:t}):Object(k.jsx)(y,{}),Object(k.jsx)(d.b,{to:"/search","data-testid":"link-to-search",children:"Search"}),Object(k.jsx)(d.b,{to:"/favorites","data-testid":"link-to-favorites",children:"Favorites"}),Object(k.jsx)(d.b,{to:"/profile","data-testid":"link-to-profile",children:"Profile"}),"Header"]})}}]),n}(a.Component),C=function(){var t=Object(p.a)(b.a.mark((function t(e){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(e,"&entity=song"));case 2:return n=t.sent,t.next=5,n.json();case 5:return a=t.sent,t.abrupt("return",a.results);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),w=C,N=n(13),I=n(24),F="favorite_songs";JSON.parse(localStorage.getItem(F))||localStorage.setItem(F,JSON.stringify([]));var P=function(){return JSON.parse(localStorage.getItem(F))},D=function(t){return localStorage.setItem(F,JSON.stringify(t))},B=function(t){return function(e){setTimeout((function(){e(t)}),500)}},U=function(t){return new Promise((function(e){if(t){var n=P();D([].concat(Object(I.a)(n),[t]))}B("OK")(e)}))},J=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={loading:!1,isFavorite:!1},t.handleButton=t.handleButton.bind(Object(N.a)(t)),t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.favoritesFunc()}},{key:"handleButton",value:function(t){var e=this;this.state.isFavorite?this.setState({isFavorite:!1}):this.setState({loading:!0,isFavorite:!0},Object(p.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U(t);case 2:e.setState({loading:!1});case 3:case"end":return n.stop()}}),n)}))))}},{key:"favoritesFunc",value:function(){var t=this,e=this.props.idFav;this.setState({loading:!0},Object(p.a)(b.a.mark((function n(){var a,r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(t){var e=P();B(e)(t)}));case 2:a=n.sent,r=a.some((function(t){return t.trackId===e})),t.setState({isFavorite:r,loading:!1});case 5:case"end":return n.stop()}}),n)}))))}},{key:"render",value:function(){var t=this,e=this.props,n=e.musicList,a=e.music,r=this.state,c=r.loading,i=r.isFavorite;return Object(k.jsx)("div",{children:n.length>0&&Object(k.jsxs)("div",{children:[c&&Object(k.jsx)(y,{}),Object(k.jsx)("p",{children:a.trackName}),Object(k.jsxs)("audio",{"data-testid":"audio-component",src:a.previewUrl,controls:!0,children:[Object(k.jsx)("track",{kind:"captions"}),Object(k.jsx)("code",{children:"audio"})]}),Object(k.jsxs)("label",{htmlFor:a.amgArtistId,children:["Favorita",Object(k.jsx)("input",{"data-testid":"checkbox-music-".concat(a.trackId),id:a.amgArtistId,type:"checkbox",checked:i,onChange:function(){return t.handleButton(a)}})]})]})})}}]),n}(a.Component),L=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={musicList:[]},t}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.getMusicList()}},{key:"getMusicList",value:function(){var t=Object(p.a)(b.a.mark((function t(){var e,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.params.id,t.next=3,w(e);case 3:n=t.sent,this.setState({musicList:n});case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state.musicList;return Object(k.jsxs)("div",{"data-testid":"page-album",children:[Object(k.jsx)(S,{}),t[1]&&Object(k.jsxs)("div",{children:[Object(k.jsx)("h1",{"data-testid":"artist-name",children:t[0].artistName}),Object(k.jsx)("h3",{"data-testid":"album-name",children:t[0].collectionName})]}),t[1]&&t.slice(1).map((function(e){return Object(k.jsx)(J,{music:e,musicList:t,idFav:e.trackId},e.trackId)}))]})}}]),n}(a.Component),M=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-favorites",children:[Object(k.jsx)(S,{}),"Favorites"]})}}]),n}(a.Component),T=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={login:"",isDesactiveButton:!0,loading:!1,response:void 0},t.handleChange=t.handleChange.bind(Object(N.a)(t)),t.saveUser=t.saveUser.bind(Object(N.a)(t)),t.loadingPage=t.loadingPage.bind(Object(N.a)(t)),t}return Object(o.a)(n,[{key:"handleChange",value:function(t){var e=t.target.value,n=e.length>=3;this.setState({login:e,isDesactiveButton:!n})}},{key:"loadingPage",value:function(){var t=this.state.loading;this.setState({loading:!t})}},{key:"saveUser",value:function(){var t=Object(p.a)(b.a.mark((function t(e){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=this.state.login,this.loadingPage(),t.next=5,g({name:n});case 5:a=t.sent,this.setState({response:a});case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.state,e=t.login,n=t.isDesactiveButton,a=t.loading,r=t.response;return Object(k.jsxs)("div",{"data-testid":"page-login",children:["Login",a&&Object(k.jsx)(y,{}),r&&Object(k.jsx)(j.a,{to:"/search"}),Object(k.jsxs)("form",{children:[Object(k.jsx)("input",{type:"text","data-testid":"login-name-input",value:e,onChange:this.handleChange}),Object(k.jsx)("button",{type:"submit","data-testid":"login-submit-button",disabled:n,onClick:this.saveUser,children:"Entrar"})]})]})}}]),n}(a.Component),A=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)("div",{"data-testid":"page-not-found",children:"PageNotFound"})}}]),n}(a.Component),E=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-profile",children:[Object(k.jsx)(S,{}),"Profile"]})}}]),n}(a.Component),K=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(k.jsx)(S,{}),"ProfileEdit"]})}}]),n}(a.Component),R=function(){var t=Object(p.a)(b.a.mark((function t(e){var n,a,r,c,i,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=encodeURI(e).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),t.next=4,fetch(a);case 4:return r=t.sent,t.next=7,r.json();case 7:return c=t.sent,i=c.results,s=i.map((function(t){return{artistId:t.artistId,artistName:t.artistName,collectionId:t.collectionId,collectionName:t.collectionName,collectionPrice:t.collectionPrice,artworkUrl100:t.artworkUrl100,releaseDate:t.releaseDate,trackCount:t.trackCount}})),t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),q=R,H=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var t=this.props,e=t.img,n=t.albumName,a=t.artistName,r=t.id;return Object(k.jsxs)(d.b,{to:"/album/".concat(r),"data-testid":"link-to-album-".concat(r),children:[Object(k.jsx)("img",{src:e,alt:n}),Object(k.jsx)("h1",{children:a}),Object(k.jsx)("h3",{children:n})]})}}]),n}(a.Component),_=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.call(this)).state={search:"",isDesactiveButton:!0,albuns:[]},t.handleClick=t.handleClick.bind(Object(N.a)(t)),t.inputSearch=t.inputSearch.bind(Object(N.a)(t)),t}return Object(o.a)(n,[{key:"handleClick",value:function(){var t=Object(p.a)(b.a.mark((function t(e){var n,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=this.state.search,t.next=4,q(n);case 4:a=t.sent,this.setState({albuns:a,prevSearch:n,search:""});case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"inputSearch",value:function(t){var e=t.target.value,n=e.length>=2;this.setState({search:e,isDesactiveButton:!n})}},{key:"render",value:function(){var t=this.state,e=t.search,n=t.isDesactiveButton,a=t.albuns,r=t.prevSearch;return Object(k.jsxs)("div",{"data-testid":"page-search",children:[Object(k.jsx)(S,{}),"Search",Object(k.jsxs)("form",{action:"",children:[Object(k.jsx)("input",{type:"text","data-testid":"search-artist-input",value:e,onChange:this.inputSearch}),Object(k.jsx)("button",{type:"submit","data-testid":"search-artist-button",onClick:this.handleClick,disabled:n,children:"Pesquisar"})]}),0===a.length?Object(k.jsx)("h1",{children:"Nenhum \xe1lbum foi encontrado"}):Object(k.jsx)("h3",{children:"Resultado de \xe1lbuns de: ".concat(r)}),a.map((function(t){return Object(k.jsx)(H,{img:t.artworkUrl100,id:t.collectionId,albumName:t.collectionName,artistName:t.artistName},t.collectionId)}))]})}}]),n}(a.Component),z=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(){return Object(s.a)(this,n),e.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(k.jsx)(d.a,{children:Object(k.jsxs)(j.d,{children:[Object(k.jsx)(j.b,{exact:!0,path:"/",component:T}),Object(k.jsx)(j.b,{exact:!0,path:"/TrybeTunes",component:T}),Object(k.jsx)(j.b,{path:"/search",component:_}),Object(k.jsx)(j.b,{path:"/album/:id",component:L}),Object(k.jsx)(j.b,{path:"/favorites",component:M}),Object(k.jsx)(j.b,{exact:!0,path:"/profile",component:E}),Object(k.jsx)(j.b,{path:"/profile/edit",component:K}),Object(k.jsx)(j.b,{path:"*",component:A})]})})}}]),n}(r.a.Component),G=z;i.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(G,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.0d771fbd.chunk.js.map